// Name: QR Codes
// ID: SPqrCodes
// Description: Create and Read QR Codes
// By: SharkPool
// Tags: Utility
// Version 2.0.0

(function (Scratch) {
  "use strict";
  if (!Scratch.extensions.unsandboxed) throw new Error("QR Code must run unsandboxed");

  const menuIconURI =
"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxNDEuNTI2ODMiIGhlaWdodD0iMTQxLjUyNjgzIiB2aWV3Qm94PSIwLDAsMTQxLjUyNjgzLDE0MS41MjY4MyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIyNDAiIHkxPSIxMTIuMjM2NTkiIHgyPSIyNDAiIHkyPSIyNDcuNzYzNDEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY29sb3ItMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMmRjNGFkIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMmVjYzcxIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjI0MCIgeTE9IjExMi4yMzY1OSIgeDI9IjI0MCIgeTI9IjI0Ny43NjM0MSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJjb2xvci0yIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxYTZmM2QiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxOTZiNWUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTY5LjIzNjU5LC0xMDkuMjM2NTkpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0xNzIuMjM2NTksMTgwYzAsLTM3LjQyNDcgMzAuMzM4NzEsLTY3Ljc2MzQxIDY3Ljc2MzQxLC02Ny43NjM0MWMzNy40MjQ3LDAgNjcuNzYzNDEsMzAuMzM4NzEgNjcuNzYzNDEsNjcuNzYzNDFjMCwzNy40MjQ3IC0zMC4zMzg3MSw2Ny43NjM0MSAtNjcuNzYzNDEsNjcuNzYzNDFjLTM3LjQyNDcsMCAtNjcuNzYzNDEsLTMwLjMzODcxIC02Ny43NjM0MSwtNjcuNzYzNDF6IiBmaWxsPSJ1cmwoI2NvbG9yLTEpIiBzdHJva2U9InVybCgjY29sb3ItMikiIHN0cm9rZS13aWR0aD0iNiIvPjxwYXRoIGQ9Ik0yMDIuMjg0ODEsMjE2LjcxNTE5di03NC40MzAzOGg3NC40MzAzOHY3NC40MzAzOHoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIi8+PHBhdGggZD0iTTIwMi4yODQ4MSwxNDIuMjg0ODFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDUuODI5MTEsMTQyLjI4NDgxaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA5LjM3MzQyLDE0Mi4yODQ4MWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxMi45MTc3MiwxNDIuMjg0ODFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTYuNDYyMDMsMTQyLjI4NDgxaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIwLjAwNjMzLDE0Mi4yODQ4MWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMy41NTA2MywxNDIuMjg0ODFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzcuNzI3ODUsMTQyLjI4NDgxaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDE0Mi4yODQ4MWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1NS40NDkzNywxNDIuMjg0ODFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTguOTkzNjcsMTQyLjI4NDgxaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjYyLjUzNzk3LDE0Mi4yODQ4MWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwxNDIuMjg0ODFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjkuNjI2NTgsMTQyLjI4NDgxaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjczLjE3MDg5LDE0Mi4yODQ4MWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwMi4yODQ4MSwxNDUuODI5MTFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjMuNTUwNjMsMTQ1LjgyOTExaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjMwLjYzOTI0LDE0NS44MjkxMWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzNy43Mjc4NSwxNDUuODI5MTFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDEuMjcyMTUsMTQ1LjgyOTExaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQ0LjgxNjQ2LDE0NS44MjkxMWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1MS45MDUwNiwxNDUuODI5MTFoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNzMuMTcwODksMTQ1LjgyOTExaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDE0OS4zNzM0MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwOS4zNzM0MiwxNDkuMzczNDJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTIuOTE3NzIsMTQ5LjM3MzQyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjE2LjQ2MjAzLDE0OS4zNzM0MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMy41NTA2MywxNDkuMzczNDJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDEuMjcyMTUsMTQ5LjM3MzQyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDE0OS4zNzM0MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1OC45OTM2NywxNDkuMzczNDJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjIuNTM3OTcsMTQ5LjM3MzQyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjY2LjA4MjI4LDE0OS4zNzM0MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI3My4xNzA4OSwxNDkuMzczNDJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDIuMjg0ODEsMTUyLjkxNzcyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA5LjM3MzQyLDE1Mi45MTc3MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxMi45MTc3MiwxNTIuOTE3NzJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTYuNDYyMDMsMTUyLjkxNzcyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIzLjU1MDYzLDE1Mi45MTc3MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzMC42MzkyNCwxNTIuOTE3NzJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzQuMTgzNTQsMTUyLjkxNzcyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM3LjcyNzg1LDE1Mi45MTc3MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0MS4yNzIxNSwxNTIuOTE3NzJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTEuOTA1MDYsMTUyLjkxNzcyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjU4Ljk5MzY3LDE1Mi45MTc3MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Mi41Mzc5NywxNTIuOTE3NzJoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjYuMDgyMjgsMTUyLjkxNzcyaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjczLjE3MDg5LDE1Mi45MTc3MmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwMi4yODQ4MSwxNTYuNDYyMDNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDkuMzczNDIsMTU2LjQ2MjAzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjEyLjkxNzcyLDE1Ni40NjIwM2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxNi40NjIwMywxNTYuNDYyMDNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjMuNTUwNjMsMTU2LjQ2MjAzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM3LjcyNzg1LDE1Ni40NjIwM2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1MS45MDUwNiwxNTYuNDYyMDNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTguOTkzNjcsMTU2LjQ2MjAzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjYyLjUzNzk3LDE1Ni40NjIwM2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwxNTYuNDYyMDNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNzMuMTcwODksMTU2LjQ2MjAzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDE2MC4wMDYzM2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMy41NTA2MywxNjAuMDA2MzNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzAuNjM5MjQsMTYwLjAwNjMzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM0LjE4MzU0LDE2MC4wMDYzM2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0MS4yNzIxNSwxNjAuMDA2MzNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDQuODE2NDYsMTYwLjAwNjMzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDE2MC4wMDYzM2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI3My4xNzA4OSwxNjAuMDA2MzNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDIuMjg0ODEsMTYzLjU1MDYzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA1LjgyOTExLDE2My41NTA2M2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwOS4zNzM0MiwxNjMuNTUwNjNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTIuOTE3NzIsMTYzLjU1MDYzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjE2LjQ2MjAzLDE2My41NTA2M2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMC4wMDYzMywxNjMuNTUwNjNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjMuNTUwNjMsMTYzLjU1MDYzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjMwLjYzOTI0LDE2My41NTA2M2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzNy43Mjc4NSwxNjMuNTUwNjNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDQuODE2NDYsMTYzLjU1MDYzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDE2My41NTA2M2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1NS40NDkzNywxNjMuNTUwNjNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTguOTkzNjcsMTYzLjU1MDYzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjYyLjUzNzk3LDE2My41NTA2M2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwxNjMuNTUwNjNoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjkuNjI2NTgsMTYzLjU1MDYzaDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjczLjE3MDg5LDE2My41NTA2M2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzNC4xODM1NCwxNjcuMDk0OTRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDEuMjcyMTUsMTY3LjA5NDk0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDE3MC42MzkyNGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwNS44MjkxMSwxNzAuNjM5MjRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDkuMzczNDIsMTcwLjYzOTI0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjEyLjkxNzcyLDE3MC42MzkyNGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxNi40NjIwMywxNzAuNjM5MjRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjMuNTUwNjMsMTcwLjYzOTI0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjI3LjA5NDk0LDE3MC42MzkyNGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzMC42MzkyNCwxNzAuNjM5MjRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzQuMTgzNTQsMTcwLjYzOTI0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQ0LjgxNjQ2LDE3MC42MzkyNGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0OC4zNjA3NiwxNzAuNjM5MjRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTUuNDQ5MzcsMTcwLjYzOTI0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjYyLjUzNzk3LDE3MC42MzkyNGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2OS42MjY1OCwxNzAuNjM5MjRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDIuMjg0ODEsMTc0LjE4MzU0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA1LjgyOTExLDE3NC4xODM1NGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxMi45MTc3MiwxNzQuMTgzNTRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTYuNDYyMDMsMTc0LjE4MzU0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIwLjAwNjMzLDE3NC4xODM1NGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyNy4wOTQ5NCwxNzQuMTgzNTRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzcuNzI3ODUsMTc0LjE4MzU0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQ0LjgxNjQ2LDE3NC4xODM1NGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0OC4zNjA3NiwxNzQuMTgzNTRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTEuOTA1MDYsMTc0LjE4MzU0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjU1LjQ0OTM3LDE3NC4xODM1NGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1OC45OTM2NywxNzQuMTgzNTRoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNzMuMTcwODksMTc0LjE4MzU0aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDE3Ny43Mjc4NWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxNi40NjIwMywxNzcuNzI3ODVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjAuMDA2MzMsMTc3LjcyNzg1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIzLjU1MDYzLDE3Ny43Mjc4NWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzNC4xODM1NCwxNzcuNzI3ODVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzcuNzI3ODUsMTc3LjcyNzg1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQxLjI3MjE1LDE3Ny43Mjc4NWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0NC44MTY0NiwxNzcuNzI3ODVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDguMzYwNzYsMTc3LjcyNzg1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDE3Ny43Mjc4NWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwxNzcuNzI3ODVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjkuNjI2NTgsMTc3LjcyNzg1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA5LjM3MzQyLDE4MS4yNzIxNWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxNi40NjIwMywxODEuMjcyMTVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjAuMDA2MzMsMTgxLjI3MjE1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjI3LjA5NDk0LDE4MS4yNzIxNWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzMC42MzkyNCwxODEuMjcyMTVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzQuMTgzNTQsMTgxLjI3MjE1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQ0LjgxNjQ2LDE4MS4yNzIxNWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0OC4zNjA3NiwxODEuMjcyMTVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTguOTkzNjcsMTgxLjI3MjE1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjYyLjUzNzk3LDE4MS4yNzIxNWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwxODEuMjcyMTVoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjkuNjI2NTgsMTgxLjI3MjE1aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjczLjE3MDg5LDE4MS4yNzIxNWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwNS44MjkxMSwxODQuODE2NDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDkuMzczNDIsMTg0LjgxNjQ2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjEyLjkxNzcyLDE4NC44MTY0NmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxNi40NjIwMywxODQuODE2NDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjMuNTUwNjMsMTg0LjgxNjQ2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM0LjE4MzU0LDE4NC44MTY0NmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzNy43Mjc4NSwxODQuODE2NDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDQuODE2NDYsMTg0LjgxNjQ2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDE4NC44MTY0NmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1OC45OTM2NywxODQuODE2NDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzAuNjM5MjQsMTg4LjM2MDc2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM3LjcyNzg1LDE4OC4zNjA3NmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0OC4zNjA3NiwxODguMzYwNzZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTEuOTA1MDYsMTg4LjM2MDc2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjU1LjQ0OTM3LDE4OC4zNjA3NmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1OC45OTM2NywxODguMzYwNzZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjYuMDgyMjgsMTg4LjM2MDc2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjY5LjYyNjU4LDE4OC4zNjA3NmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwMi4yODQ4MSwxOTEuOTA1MDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDUuODI5MTEsMTkxLjkwNTA2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA5LjM3MzQyLDE5MS45MDUwNmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxMi45MTc3MiwxOTEuOTA1MDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTYuNDYyMDMsMTkxLjkwNTA2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIwLjAwNjMzLDE5MS45MDUwNmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMy41NTA2MywxOTEuOTA1MDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzAuNjM5MjQsMTkxLjkwNTA2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM3LjcyNzg1LDE5MS45MDUwNmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0NC44MTY0NiwxOTEuOTA1MDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjIuNTM3OTcsMTkxLjkwNTA2aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjY2LjA4MjI4LDE5MS45MDUwNmgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2OS42MjY1OCwxOTEuOTA1MDZoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDIuMjg0ODEsMTk1LjQ0OTM3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIzLjU1MDYzLDE5NS40NDkzN2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0MS4yNzIxNSwxOTUuNDQ5MzdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTUuNDQ5MzcsMTk1LjQ0OTM3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjYyLjUzNzk3LDE5NS40NDkzN2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwxOTUuNDQ5MzdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjkuNjI2NTgsMTk1LjQ0OTM3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDE5OC45OTM2N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwOS4zNzM0MiwxOTguOTkzNjdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTIuOTE3NzIsMTk4Ljk5MzY3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjE2LjQ2MjAzLDE5OC45OTM2N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMy41NTA2MywxOTguOTkzNjdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzAuNjM5MjQsMTk4Ljk5MzY3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjM3LjcyNzg1LDE5OC45OTM2N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0NC44MTY0NiwxOTguOTkzNjdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTEuOTA1MDYsMTk4Ljk5MzY3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjU1LjQ0OTM3LDE5OC45OTM2N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Mi41Mzc5NywxOTguOTkzNjdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDIuMjg0ODEsMjAyLjUzNzk3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjA5LjM3MzQyLDIwMi41Mzc5N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxMi45MTc3MiwyMDIuNTM3OTdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTYuNDYyMDMsMjAyLjUzNzk3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIzLjU1MDYzLDIwMi41Mzc5N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzMC42MzkyNCwyMDIuNTM3OTdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzcuNzI3ODUsMjAyLjUzNzk3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQxLjI3MjE1LDIwMi41Mzc5N2gzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Ni4wODIyOCwyMDIuNTM3OTdoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjkuNjI2NTgsMjAyLjUzNzk3aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDIwNi4wODIyOGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwOS4zNzM0MiwyMDYuMDgyMjhoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMTIuOTE3NzIsMjA2LjA4MjI4aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjE2LjQ2MjAzLDIwNi4wODIyOGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIyMy41NTA2MywyMDYuMDgyMjhoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzAuNjM5MjQsMjA2LjA4MjI4aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQxLjI3MjE1LDIwNi4wODIyOGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0NC44MTY0NiwyMDYuMDgyMjhoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDIuMjg0ODEsMjA5LjYyNjU4aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIzLjU1MDYzLDIwOS42MjY1OGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzMC42MzkyNCwyMDkuNjI2NThoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzQuMTgzNTQsMjA5LjYyNjU4aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjQxLjI3MjE1LDIwOS42MjY1OGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI0NC44MTY0NiwyMDkuNjI2NThoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNDguMzYwNzYsMjA5LjYyNjU4aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjU4Ljk5MzY3LDIwOS42MjY1OGgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI2Mi41Mzc5NywyMDkuNjI2NThoMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNjYuMDgyMjgsMjA5LjYyNjU4aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjAyLjI4NDgxLDIxMy4xNzA4OWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIwNS44MjkxMSwyMTMuMTcwODloMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMDkuMzczNDIsMjEzLjE3MDg5aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjEyLjkxNzcyLDIxMy4xNzA4OWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIxNi40NjIwMywyMTMuMTcwODloMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMjAuMDA2MzMsMjEzLjE3MDg5aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjIzLjU1MDYzLDIxMy4xNzA4OWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTIzMC42MzkyNCwyMTMuMTcwODloMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yMzcuNzI3ODUsMjEzLjE3MDg5aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjUxLjkwNTA2LDIxMy4xNzA4OWgzLjU0NDN2My41NDQzaC0zLjU0NDN6TTI1NS40NDkzNywyMTMuMTcwODloMy41NDQzdjMuNTQ0M2gtMy41NDQzek0yNTguOTkzNjcsMjEzLjE3MDg5aDMuNTQ0M3YzLjU0NDNoLTMuNTQ0M3pNMjY5LjYyNjU4LDIxMy4xNzA4OWgzLjU0NDN2My41NDQzaC0zLjU0NDN6IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48L2c+PC9zdmc+";
  const blockIconURI =
"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iODQiIGhlaWdodD0iODQiPgoJPCEtLSBDcmVhdGVkIHdpdGggaHR0cHM6Ly9hcGkucXJzZXJ2ZXIuY29tIChRUiBDb2RlIEFQSSwgc2VlIGdvUVIubWUvYXBpIGZvciBpbmZvcm1hdGlvbikgLS0+Cgk8dGl0bGU+UVIgQ29kZTwvdGl0bGU+Cgk8ZGVzYz5TaGFya1Bvb2wgaXMgQ29vbDwvZGVzYz4KCTxyZWN0IHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KTtmaWxsLW9wYWNpdHk6MSIgeD0iMCIgeT0iMCIgd2lkdGg9Ijg0IiBoZWlnaHQ9Ijg0IiAvPgoJPGcgaWQ9ImVsZW1lbnRzIj4KCQk8cGF0aCBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIGQ9Ik0gMCwwIGwgNCwwIDAsNCAtNCwwIHogTSA0LDAgbCA0LDAgMCw0IC00LDAgeiBNIDgsMCBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsMCBsIDQsMCAwLDQgLTQsMCB6IE0gMTYsMCBsIDQsMCAwLDQgLTQsMCB6IE0gMjAsMCBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNDAsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNTYsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNjAsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNjQsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNjgsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNzIsMCBsIDQsMCAwLDQgLTQsMCB6IE0gNzYsMCBsIDQsMCAwLDQgLTQsMCB6IE0gODAsMCBsIDQsMCAwLDQgLTQsMCB6IE0gMCw0IGwgNCwwIDAsNCAtNCwwIHogTSAyNCw0IGwgNCwwIDAsNCAtNCwwIHogTSAzMiw0IGwgNCwwIDAsNCAtNCwwIHogTSA0MCw0IGwgNCwwIDAsNCAtNCwwIHogTSA0NCw0IGwgNCwwIDAsNCAtNCwwIHogTSA0OCw0IGwgNCwwIDAsNCAtNCwwIHogTSA1Niw0IGwgNCwwIDAsNCAtNCwwIHogTSA4MCw0IGwgNCwwIDAsNCAtNCwwIHogTSAwLDggbCA0LDAgMCw0IC00LDAgeiBNIDgsOCBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsOCBsIDQsMCAwLDQgLTQsMCB6IE0gMTYsOCBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsOCBsIDQsMCAwLDQgLTQsMCB6IE0gNDQsOCBsIDQsMCAwLDQgLTQsMCB6IE0gNTYsOCBsIDQsMCAwLDQgLTQsMCB6IE0gNjQsOCBsIDQsMCAwLDQgLTQsMCB6IE0gNjgsOCBsIDQsMCAwLDQgLTQsMCB6IE0gNzIsOCBsIDQsMCAwLDQgLTQsMCB6IE0gODAsOCBsIDQsMCAwLDQgLTQsMCB6IE0gMCwxMiBsIDQsMCAwLDQgLTQsMCB6IE0gOCwxMiBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsMTIgbCA0LDAgMCw0IC00LDAgeiBNIDE2LDEyIGwgNCwwIDAsNCAtNCwwIHogTSAyNCwxMiBsIDQsMCAwLDQgLTQsMCB6IE0gMzIsMTIgbCA0LDAgMCw0IC00LDAgeiBNIDM2LDEyIGwgNCwwIDAsNCAtNCwwIHogTSA0MCwxMiBsIDQsMCAwLDQgLTQsMCB6IE0gNDQsMTIgbCA0LDAgMCw0IC00LDAgeiBNIDU2LDEyIGwgNCwwIDAsNCAtNCwwIHogTSA2NCwxMiBsIDQsMCAwLDQgLTQsMCB6IE0gNjgsMTIgbCA0LDAgMCw0IC00LDAgeiBNIDcyLDEyIGwgNCwwIDAsNCAtNCwwIHogTSA4MCwxMiBsIDQsMCAwLDQgLTQsMCB6IE0gMCwxNiBsIDQsMCAwLDQgLTQsMCB6IE0gOCwxNiBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsMTYgbCA0LDAgMCw0IC00LDAgeiBNIDE2LDE2IGwgNCwwIDAsNCAtNCwwIHogTSAyNCwxNiBsIDQsMCAwLDQgLTQsMCB6IE0gNDAsMTYgbCA0LDAgMCw0IC00LDAgeiBNIDU2LDE2IGwgNCwwIDAsNCAtNCwwIHogTSA2NCwxNiBsIDQsMCAwLDQgLTQsMCB6IE0gNjgsMTYgbCA0LDAgMCw0IC00LDAgeiBNIDcyLDE2IGwgNCwwIDAsNCAtNCwwIHogTSA4MCwxNiBsIDQsMCAwLDQgLTQsMCB6IE0gMCwyMCBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsMjAgbCA0LDAgMCw0IC00LDAgeiBNIDMyLDIwIGwgNCwwIDAsNCAtNCwwIHogTSAzNiwyMCBsIDQsMCAwLDQgLTQsMCB6IE0gNDQsMjAgbCA0LDAgMCw0IC00LDAgeiBNIDQ4LDIwIGwgNCwwIDAsNCAtNCwwIHogTSA1NiwyMCBsIDQsMCAwLDQgLTQsMCB6IE0gODAsMjAgbCA0LDAgMCw0IC00LDAgeiBNIDAsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDQsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDgsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDEyLDI0IGwgNCwwIDAsNCAtNCwwIHogTSAxNiwyNCBsIDQsMCAwLDQgLTQsMCB6IE0gMjAsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDI0LDI0IGwgNCwwIDAsNCAtNCwwIHogTSAzMiwyNCBsIDQsMCAwLDQgLTQsMCB6IE0gNDAsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDQ4LDI0IGwgNCwwIDAsNCAtNCwwIHogTSA1NiwyNCBsIDQsMCAwLDQgLTQsMCB6IE0gNjAsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDY0LDI0IGwgNCwwIDAsNCAtNCwwIHogTSA2OCwyNCBsIDQsMCAwLDQgLTQsMCB6IE0gNzIsMjQgbCA0LDAgMCw0IC00LDAgeiBNIDc2LDI0IGwgNCwwIDAsNCAtNCwwIHogTSA4MCwyNCBsIDQsMCAwLDQgLTQsMCB6IE0gMzYsMjggbCA0LDAgMCw0IC00LDAgeiBNIDQ0LDI4IGwgNCwwIDAsNCAtNCwwIHogTSAwLDMyIGwgNCwwIDAsNCAtNCwwIHogTSA0LDMyIGwgNCwwIDAsNCAtNCwwIHogTSA4LDMyIGwgNCwwIDAsNCAtNCwwIHogTSAxMiwzMiBsIDQsMCAwLDQgLTQsMCB6IE0gMTYsMzIgbCA0LDAgMCw0IC00LDAgeiBNIDI0LDMyIGwgNCwwIDAsNCAtNCwwIHogTSAyOCwzMiBsIDQsMCAwLDQgLTQsMCB6IE0gMzIsMzIgbCA0LDAgMCw0IC00LDAgeiBNIDM2LDMyIGwgNCwwIDAsNCAtNCwwIHogTSA0OCwzMiBsIDQsMCAwLDQgLTQsMCB6IE0gNTIsMzIgbCA0LDAgMCw0IC00LDAgeiBNIDYwLDMyIGwgNCwwIDAsNCAtNCwwIHogTSA2OCwzMiBsIDQsMCAwLDQgLTQsMCB6IE0gNzYsMzIgbCA0LDAgMCw0IC00LDAgeiBNIDAsMzYgbCA0LDAgMCw0IC00LDAgeiBNIDQsMzYgbCA0LDAgMCw0IC00LDAgeiBNIDEyLDM2IGwgNCwwIDAsNCAtNCwwIHogTSAxNiwzNiBsIDQsMCAwLDQgLTQsMCB6IE0gMjAsMzYgbCA0LDAgMCw0IC00LDAgeiBNIDI4LDM2IGwgNCwwIDAsNCAtNCwwIHogTSA0MCwzNiBsIDQsMCAwLDQgLTQsMCB6IE0gNDgsMzYgbCA0LDAgMCw0IC00LDAgeiBNIDUyLDM2IGwgNCwwIDAsNCAtNCwwIHogTSA1NiwzNiBsIDQsMCAwLDQgLTQsMCB6IE0gNjAsMzYgbCA0LDAgMCw0IC00LDAgeiBNIDY0LDM2IGwgNCwwIDAsNCAtNCwwIHogTSA4MCwzNiBsIDQsMCAwLDQgLTQsMCB6IE0gMCw0MCBsIDQsMCAwLDQgLTQsMCB6IE0gMTYsNDAgbCA0LDAgMCw0IC00LDAgeiBNIDIwLDQwIGwgNCwwIDAsNCAtNCwwIHogTSAyNCw0MCBsIDQsMCAwLDQgLTQsMCB6IE0gMzYsNDAgbCA0LDAgMCw0IC00LDAgeiBNIDQwLDQwIGwgNCwwIDAsNCAtNCwwIHogTSA0NCw0MCBsIDQsMCAwLDQgLTQsMCB6IE0gNDgsNDAgbCA0LDAgMCw0IC00LDAgeiBNIDUyLDQwIGwgNCwwIDAsNCAtNCwwIHogTSA1Niw0MCBsIDQsMCAwLDQgLTQsMCB6IE0gNzIsNDAgbCA0LDAgMCw0IC00LDAgeiBNIDc2LDQwIGwgNCwwIDAsNCAtNCwwIHogTSA4LDQ0IGwgNCwwIDAsNCAtNCwwIHogTSAxNiw0NCBsIDQsMCAwLDQgLTQsMCB6IE0gMjAsNDQgbCA0LDAgMCw0IC00LDAgeiBNIDI4LDQ0IGwgNCwwIDAsNCAtNCwwIHogTSAzMiw0NCBsIDQsMCAwLDQgLTQsMCB6IE0gMzYsNDQgbCA0LDAgMCw0IC00LDAgeiBNIDQ4LDQ0IGwgNCwwIDAsNCAtNCwwIHogTSA1Miw0NCBsIDQsMCAwLDQgLTQsMCB6IE0gNjQsNDQgbCA0LDAgMCw0IC00LDAgeiBNIDY4LDQ0IGwgNCwwIDAsNCAtNCwwIHogTSA3Miw0NCBsIDQsMCAwLDQgLTQsMCB6IE0gNzYsNDQgbCA0LDAgMCw0IC00LDAgeiBNIDgwLDQ0IGwgNCwwIDAsNCAtNCwwIHogTSA0LDQ4IGwgNCwwIDAsNCAtNCwwIHogTSA4LDQ4IGwgNCwwIDAsNCAtNCwwIHogTSAxMiw0OCBsIDQsMCAwLDQgLTQsMCB6IE0gMTYsNDggbCA0LDAgMCw0IC00LDAgeiBNIDI0LDQ4IGwgNCwwIDAsNCAtNCwwIHogTSAzNiw0OCBsIDQsMCAwLDQgLTQsMCB6IE0gNDAsNDggbCA0LDAgMCw0IC00LDAgeiBNIDQ4LDQ4IGwgNCwwIDAsNCAtNCwwIHogTSA1Niw0OCBsIDQsMCAwLDQgLTQsMCB6IE0gNjQsNDggbCA0LDAgMCw0IC00LDAgeiBNIDMyLDUyIGwgNCwwIDAsNCAtNCwwIHogTSA0MCw1MiBsIDQsMCAwLDQgLTQsMCB6IE0gNTIsNTIgbCA0LDAgMCw0IC00LDAgeiBNIDU2LDUyIGwgNCwwIDAsNCAtNCwwIHogTSA2MCw1MiBsIDQsMCAwLDQgLTQsMCB6IE0gNjQsNTIgbCA0LDAgMCw0IC00LDAgeiBNIDcyLDUyIGwgNCwwIDAsNCAtNCwwIHogTSA3Niw1MiBsIDQsMCAwLDQgLTQsMCB6IE0gMCw1NiBsIDQsMCAwLDQgLTQsMCB6IE0gNCw1NiBsIDQsMCAwLDQgLTQsMCB6IE0gOCw1NiBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsNTYgbCA0LDAgMCw0IC00LDAgeiBNIDE2LDU2IGwgNCwwIDAsNCAtNCwwIHogTSAyMCw1NiBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsNTYgbCA0LDAgMCw0IC00LDAgeiBNIDMyLDU2IGwgNCwwIDAsNCAtNCwwIHogTSA0MCw1NiBsIDQsMCAwLDQgLTQsMCB6IE0gNDgsNTYgbCA0LDAgMCw0IC00LDAgeiBNIDY4LDU2IGwgNCwwIDAsNCAtNCwwIHogTSA3Miw1NiBsIDQsMCAwLDQgLTQsMCB6IE0gNzYsNTYgbCA0LDAgMCw0IC00LDAgeiBNIDAsNjAgbCA0LDAgMCw0IC00LDAgeiBNIDI0LDYwIGwgNCwwIDAsNCAtNCwwIHogTSA0NCw2MCBsIDQsMCAwLDQgLTQsMCB6IE0gNjAsNjAgbCA0LDAgMCw0IC00LDAgeiBNIDY4LDYwIGwgNCwwIDAsNCAtNCwwIHogTSA3Miw2MCBsIDQsMCAwLDQgLTQsMCB6IE0gNzYsNjAgbCA0LDAgMCw0IC00LDAgeiBNIDAsNjQgbCA0LDAgMCw0IC00LDAgeiBNIDgsNjQgbCA0LDAgMCw0IC00LDAgeiBNIDEyLDY0IGwgNCwwIDAsNCAtNCwwIHogTSAxNiw2NCBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsNjQgbCA0LDAgMCw0IC00LDAgeiBNIDMyLDY0IGwgNCwwIDAsNCAtNCwwIHogTSA0MCw2NCBsIDQsMCAwLDQgLTQsMCB6IE0gNDgsNjQgbCA0LDAgMCw0IC00LDAgeiBNIDU2LDY0IGwgNCwwIDAsNCAtNCwwIHogTSA2MCw2NCBsIDQsMCAwLDQgLTQsMCB6IE0gNjgsNjQgbCA0LDAgMCw0IC00LDAgeiBNIDAsNjggbCA0LDAgMCw0IC00LDAgeiBNIDgsNjggbCA0LDAgMCw0IC00LDAgeiBNIDEyLDY4IGwgNCwwIDAsNCAtNCwwIHogTSAxNiw2OCBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsNjggbCA0LDAgMCw0IC00LDAgeiBNIDMyLDY4IGwgNCwwIDAsNCAtNCwwIHogTSA0MCw2OCBsIDQsMCAwLDQgLTQsMCB6IE0gNDQsNjggbCA0LDAgMCw0IC00LDAgeiBNIDcyLDY4IGwgNCwwIDAsNCAtNCwwIHogTSA3Niw2OCBsIDQsMCAwLDQgLTQsMCB6IE0gMCw3MiBsIDQsMCAwLDQgLTQsMCB6IE0gOCw3MiBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsNzIgbCA0LDAgMCw0IC00LDAgeiBNIDE2LDcyIGwgNCwwIDAsNCAtNCwwIHogTSAyNCw3MiBsIDQsMCAwLDQgLTQsMCB6IE0gMzIsNzIgbCA0LDAgMCw0IC00LDAgeiBNIDQ0LDcyIGwgNCwwIDAsNCAtNCwwIHogTSA0OCw3MiBsIDQsMCAwLDQgLTQsMCB6IE0gMCw3NiBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsNzYgbCA0LDAgMCw0IC00LDAgeiBNIDMyLDc2IGwgNCwwIDAsNCAtNCwwIHogTSAzNiw3NiBsIDQsMCAwLDQgLTQsMCB6IE0gNDQsNzYgbCA0LDAgMCw0IC00LDAgeiBNIDQ4LDc2IGwgNCwwIDAsNCAtNCwwIHogTSA1Miw3NiBsIDQsMCAwLDQgLTQsMCB6IE0gNjQsNzYgbCA0LDAgMCw0IC00LDAgeiBNIDY4LDc2IGwgNCwwIDAsNCAtNCwwIHogTSA3Miw3NiBsIDQsMCAwLDQgLTQsMCB6IE0gMCw4MCBsIDQsMCAwLDQgLTQsMCB6IE0gNCw4MCBsIDQsMCAwLDQgLTQsMCB6IE0gOCw4MCBsIDQsMCAwLDQgLTQsMCB6IE0gMTIsODAgbCA0LDAgMCw0IC00LDAgeiBNIDE2LDgwIGwgNCwwIDAsNCAtNCwwIHogTSAyMCw4MCBsIDQsMCAwLDQgLTQsMCB6IE0gMjQsODAgbCA0LDAgMCw0IC00LDAgeiBNIDMyLDgwIGwgNCwwIDAsNCAtNCwwIHogTSA0MCw4MCBsIDQsMCAwLDQgLTQsMCB6IE0gNTYsODAgbCA0LDAgMCw0IC00LDAgeiBNIDYwLDgwIGwgNCwwIDAsNCAtNCwwIHogTSA2NCw4MCBsIDQsMCAwLDQgLTQsMCB6IE0gNzYsODAgbCA0LDAgMCw0IC00LDAgeiAiIC8+Cgk8L2c+Cjwvc3ZnPgo=";

  // QR Generator (MIT Licence -- davidshimjs/qrcodejs)
  const QRCodeScript = document.createElement("script");
  QRCodeScript.textContent = 
`var QRCode;!function(){function t(t){this.mode=e.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var _=0,r=this.data.length;_<r;_++){var i=[],o=this.data.charCodeAt(_);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function _(t,_){this.typeNumber=t,this.errorCorrectLevel=_,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var _=0,e=this.parsedData.length;_<e;_++)t.put(this.parsedData[_],8)}},_.prototype={addData:function(_){var e=new t(_);this.dataList.push(e),this.dataCache=null},isDark:function(t,_){if(t<0||this.moduleCount<=t||_<0||this.moduleCount<=_)throw Error(t+","+_);return this.modules[t][_]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=_.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,_){for(var e=-1;e<=7;e++)if(!(t+e<=-1)&&!(this.moduleCount<=t+e))for(var r=-1;r<=7;r++)_+r<=-1||this.moduleCount<=_+r||(0<=e&&e<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==e||6==e)||2<=e&&e<=4&&2<=r&&r<=4?this.modules[t+e][_+r]=!0:this.modules[t+e][_+r]=!1)},getBestMaskPattern:function(){for(var t=0,_=0,e=0;e<8;e++){this.makeImpl(!0,e);var r=o.getLostPoint(this);(0==e||t>r)&&(t=r,_=e)}return _},createMovieClip:function(t,_,e){var r=t.createEmptyMovieClip(_,e);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,n=0;n<this.modules[i].length;n++){var a=1*n;this.modules[i][n]&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+1,o),r.lineTo(a+1,o+1),r.lineTo(a,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var _=8;_<this.moduleCount-8;_++)null==this.modules[6][_]&&(this.modules[6][_]=_%2==0)},setupPositionAdjustPattern:function(){for(var t=o.getPatternPosition(this.typeNumber),_=0;_<t.length;_++)for(var e=0;e<t.length;e++){var r=t[_],i=t[e];if(null==this.modules[r][i])for(var n=-2;n<=2;n++)for(var a=-2;a<=2;a++)-2==n||2==n||-2==a||2==a||0==n&&0==a?this.modules[r+n][i+a]=!0:this.modules[r+n][i+a]=!1}},setupTypeNumber:function(t){for(var _=o.getBCHTypeNumber(this.typeNumber),e=0;e<18;e++){var r=!t&&(_>>e&1)==1;this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=r}for(var e=0;e<18;e++){var r=!t&&(_>>e&1)==1;this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=r}},setupTypeInfo:function(t,_){for(var e=this.errorCorrectLevel<<3|_,r=o.getBCHTypeInfo(e),i=0;i<15;i++){var n=!t&&(r>>i&1)==1;i<6?this.modules[i][8]=n:i<8?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(var i=0;i<15;i++){var n=!t&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=n:i<9?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,_){for(var e=-1,r=this.moduleCount-1,i=7,n=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[r][a-s]){var $=!1;n<t.length&&($=(t[n]>>>i&1)==1),o.getMask(_,r,a-s)&&($=!$),this.modules[r][a-s]=$,-1==--i&&(n++,i=7)}if((r+=e)<0||this.moduleCount<=r){r-=e,e=-e;break}}}},_.PAD0=236,_.PAD1=17,_.createData=function(t,e,r){for(var i=$.getRSBlocks(t,e),n=new h,a=0;a<r.length;a++){var s=r[a];n.put(s.mode,4),n.put(s.getLength(),o.getLengthInBits(s.mode,t)),s.write(n)}for(var l=0,a=0;a<i.length;a++)l+=i[a].dataCount;if(n.getLengthInBits()>8*l)throw Error("code length overflow. ("+n.getLengthInBits()+">"+8*l+")");for(n.getLengthInBits()+4<=8*l&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*l)&&(n.put(_.PAD0,8),!(n.getLengthInBits()>=8*l));){n.put(_.PAD1,8)}return _.createBytes(n,i)},_.createBytes=function(t,_){for(var e=0,r=0,i=0,n=Array(_.length),a=Array(_.length),$=0;$<_.length;$++){var h=_[$].dataCount,l=_[$].totalCount-h;r=Math.max(r,h),i=Math.max(i,l),n[$]=Array(h);for(var u=0;u<n[$].length;u++)n[$][u]=255&t.buffer[u+e];e+=h;var f=o.getErrorCorrectPolynomial(l),g=new s(n[$],f.getLength()-1).mod(f);a[$]=Array(f.getLength()-1);for(var u=0;u<a[$].length;u++){var d=u+g.getLength()-a[$].length;a[$][u]=d>=0?g.get(d):0}}for(var c=0,u=0;u<_.length;u++)c+=_[u].totalCount;for(var p=Array(c),m=0,u=0;u<r;u++)for(var $=0;$<_.length;$++)u<n[$].length&&(p[m++]=n[$][u]);for(var u=0;u<i;u++)for(var $=0;$<_.length;$++)u<a[$].length&&(p[m++]=a[$][u]);return p};for(var e={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var _=t<<10;o.getBCHDigit(_)-o.getBCHDigit(o.G15)>=0;)_^=o.G15<<o.getBCHDigit(_)-o.getBCHDigit(o.G15);return(t<<10|_)^o.G15_MASK},getBCHTypeNumber:function(t){for(var _=t<<12;o.getBCHDigit(_)-o.getBCHDigit(o.G18)>=0;)_^=o.G18<<o.getBCHDigit(_)-o.getBCHDigit(o.G18);return t<<12|_},getBCHDigit:function(t){for(var _=0;0!=t;)_++,t>>>=1;return _},getPatternPosition:function(t){return o.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,_,e){switch(t){case i.PATTERN000:return(_+e)%2==0;case i.PATTERN001:return _%2==0;case i.PATTERN010:return e%3==0;case i.PATTERN011:return(_+e)%3==0;case i.PATTERN100:return(Math.floor(_/2)+Math.floor(e/3))%2==0;case i.PATTERN101:return _*e%2+_*e%3==0;case i.PATTERN110:return(_*e%2+_*e%3)%2==0;case i.PATTERN111:return(_*e%3+(_+e)%2)%2==0;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var _=new s([1],0),e=0;e<t;e++)_=_.multiply(new s([1,n.gexp(e)],0));return _},getLengthInBits:function(t,_){if(1<=_&&_<10)switch(t){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:case e.MODE_KANJI:return 8;default:throw Error("mode:"+t)}else if(_<27)switch(t){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw Error("mode:"+t)}else if(_<41)switch(t){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw Error("mode:"+t)}else throw Error("type:"+_)},getLostPoint:function(t){for(var _=t.getModuleCount(),e=0,r=0;r<_;r++)for(var i=0;i<_;i++){for(var o=0,n=t.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0)&&!(_<=r+a))for(var s=-1;s<=1;s++)!(i+s<0)&&!(_<=i+s)&&(0!=a||0!=s)&&n==t.isDark(r+a,i+s)&&o++;o>5&&(e+=3+o-5)}for(var r=0;r<_-1;r++)for(var i=0;i<_-1;i++){var $=0;t.isDark(r,i)&&$++,t.isDark(r+1,i)&&$++,t.isDark(r,i+1)&&$++,t.isDark(r+1,i+1)&&$++,(0==$||4==$)&&(e+=3)}for(var r=0;r<_;r++)for(var i=0;i<_-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(e+=40);for(var i=0;i<_;i++)for(var r=0;r<_-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(e+=40);for(var h=0,i=0;i<_;i++)for(var r=0;r<_;r++)t.isDark(r,i)&&h++;return e+10*(Math.abs(100*h/_/_-50)/5)}},n={glog:function(t){if(t<1)throw Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},a=0;a<8;a++)n.EXP_TABLE[a]=1<<a;for(var a=8;a<256;a++)n.EXP_TABLE[a]=n.EXP_TABLE[a-4]^n.EXP_TABLE[a-5]^n.EXP_TABLE[a-6]^n.EXP_TABLE[a-8];for(var a=0;a<255;a++)n.LOG_TABLE[n.EXP_TABLE[a]]=a;function s(t,_){if(void 0==t.length)throw Error(t.length+"/"+_);for(var e=0;e<t.length&&0==t[e];)e++;this.num=Array(t.length-e+_);for(var r=0;r<t.length-e;r++)this.num[r]=t[r+e]}function $(t,_){this.totalCount=t,this.dataCount=_}function h(){this.buffer=[],this.length=0}s.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var _=Array(this.getLength()+t.getLength()-1),e=0;e<this.getLength();e++)for(var r=0;r<t.getLength();r++)_[e+r]^=n.gexp(n.glog(this.get(e))+n.glog(t.get(r)));return new s(_,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var _=n.glog(this.get(0))-n.glog(t.get(0)),e=Array(this.getLength()),r=0;r<this.getLength();r++)e[r]=this.get(r);for(var r=0;r<t.getLength();r++)e[r]^=n.gexp(n.glog(t.get(r))+_);return new s(e,0).mod(t)}},$.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],$.getRSBlocks=function(t,_){var e=$.getRsBlockTable(t,_);if(void 0==e)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+_);for(var r=e.length/3,i=[],o=0;o<r;o++)for(var n=e[3*o+0],a=e[3*o+1],s=e[3*o+2],h=0;h<n;h++)i.push(new $(a,s));return i},$.getRsBlockTable=function(t,_){switch(_){case r.L:return $.RS_BLOCK_TABLE[(t-1)*4+0];case r.M:return $.RS_BLOCK_TABLE[(t-1)*4+1];case r.Q:return $.RS_BLOCK_TABLE[(t-1)*4+2];case r.H:return $.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},h.prototype={get:function(t){var _=Math.floor(t/8);return(this.buffer[_]>>>7-t%8&1)==1},put:function(t,_){for(var e=0;e<_;e++)this.putBit((t>>>_-e-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var _=Math.floor(this.length/8);this.buffer.length<=_&&this.buffer.push(0),t&&(this.buffer[_]|=128>>>this.length%8),this.length++}};var l=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function u(){var t=!1,_=navigator.userAgent;if(/android/i.test(_)){t=!0;var e=_.toString().match(/android ([0-9]\.[0-9])/i);e&&e[1]&&(t=parseFloat(e[1]))}return t}var f,g,d=((f=function(t,_){this._el=t,this._htOption=_}).prototype.draw=function(t){var _=this._htOption,e=this._el,r=t.getModuleCount();function i(t,_){var e=document.createElementNS("http://www.w3.org/2000/svg",t);for(var r in _)_.hasOwnProperty(r)&&e.setAttribute(r,_[r]);return e}_.width,_.height,this.clear();var o=i("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:_.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),e.appendChild(o),o.appendChild(i("rect",{fill:_.colorLight,width:"100%",height:"100%"})),o.appendChild(i("rect",{fill:_.colorDark,width:"1",height:"1",id:"template"}));for(var n=0;n<r;n++)for(var a=0;a<r;a++)if(t.isDark(n,a)){var s=i("use",{x:String(a),y:String(n)});s.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(s)}},f.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},f),c="svg"===document.documentElement.tagName.toLowerCase()?d:"undefined"!=typeof CanvasRenderingContext2D?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var _=1/window.devicePixelRatio,e=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,r,i,o,n,a,s,$,h){if("nodeName"in t&&/img/i.test(t.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*_;else void 0===$&&(arguments[1]*=_,arguments[2]*=_,arguments[3]*=_,arguments[4]*=_);e.apply(this,arguments)}}function r(t,_){var e=this;if(e._fFail=_,e._fSuccess=t,null===e._bSupportDataURI){var r=document.createElement("img"),i=function(){e._bSupportDataURI=!1,e._fFail&&e._fFail.call(e)},o=function(){e._bSupportDataURI=!0,e._fSuccess&&e._fSuccess.call(e)};r.onabort=i,r.onerror=i,r.onload=o,r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}!0===e._bSupportDataURI&&e._fSuccess?e._fSuccess.call(e):!1===e._bSupportDataURI&&e._fFail&&e._fFail.call(e)}var i=function(t,_){this._bIsPainted=!1,this._android=u(),this._htOption=_,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=_.width,this._elCanvas.height=_.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(t){var _=this._elImage,e=this._oContext,r=this._htOption,i=t.getModuleCount(),o=r.width/i,n=r.height/i,a=Math.round(o),s=Math.round(n);_.style.display="none",this.clear();for(var $=0;$<i;$++)for(var h=0;h<i;h++){var l=t.isDark($,h),u=h*o,f=$*n;e.strokeStyle=l?r.colorDark:r.colorLight,e.lineWidth=1,e.fillStyle=l?r.colorDark:r.colorLight,e.fillRect(u,f,o,n),e.strokeRect(Math.floor(u)+.5,Math.floor(f)+.5,a,s),e.strokeRect(Math.ceil(u)-.5,Math.ceil(f)-.5,a,s)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&r.call(this,t)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},i}():((g=function(t,_){this._el=t,this._htOption=_}).prototype.draw=function(t){for(var _=this._htOption,e=this._el,r=t.getModuleCount(),i=Math.floor(_.width/r),o=Math.floor(_.height/r),n=['<table style="border:0;border-collapse:collapse;">'],a=0;a<r;a++){n.push("<tr>");for(var s=0;s<r;s++)n.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+"px;background-color:"+(t.isDark(a,s)?_.colorDark:_.colorLight)+';"></td>');n.push("</tr>")}n.push("</table>"),e.innerHTML=n.join("");var $=e.childNodes[0],h=(_.width-$.offsetWidth)/2,l=(_.height-$.offsetHeight)/2;h>0&&l>0&&($.style.margin=l+"px "+h+"px")},g.prototype.clear=function(){this._el.innerHTML=""},g);(QRCode=function(t,_){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},"string"==typeof _&&(_={text:_}),_)for(var e in _)this._htOption[e]=_[e];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(c=d),this._android=u(),this._el=t,this._oQRCode=null,this._oDrawing=new c(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new _(function t(_,e){for(var i,o,n=1,a=(i=_,o=encodeURI(i).toString().replace(/\%[0-9a-fA-F]{2}/g,"a"),o.length+(o.length!=i?3:0)),s=0,$=l.length;s<$;s++){var h=0;switch(e){case r.L:h=l[s][0];break;case r.M:h=l[s][1];break;case r.Q:h=l[s][2];break;case r.H:h=l[s][3]}if(a<=h)break;n++}if(n>l.length)throw Error("Too long data");return n}(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=r}();`;
  /* global QRCode */

  // QR Reader (MIT Licence -- nimiq/qr-scanner)
  const QrScannerScript = document.createElement("script");
  QrScannerScript.textContent = 
`"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).QrScanner=t()}(this,function(){class e{constructor(t,i,a,s,n){this._legacyCanvasSize=e.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.\$video=t,this.\$canvas=document.createElement("canvas"),a&&"object"==typeof a?this._onDecode=i:(a||s||n?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=i),i="object"==typeof a?a:{},this._onDecodeError=i.onDecodeError||("function"==typeof a?a:this._onDecodeError),this._calculateScanRegion=i.calculateScanRegion||("function"==typeof s?s:this._calculateScanRegion),this._preferredCamera=i.preferredCamera||n||this._preferredCamera,this._legacyCanvasSize="number"==typeof a?a:"number"==typeof s?s:this._legacyCanvasSize,this._maxScansPerSecond=i.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let r=!1;if(t.hidden&&(t.hidden=!1,r=!0),document.body.contains(t)||(document.body.appendChild(t),r=!0),a=t.parentElement,i.highlightScanRegion||i.highlightCodeOutline){if(s=!!i.overlay,this.\$overlay=i.overlay||document.createElement("div"),(n=this.\$overlay.style).position="absolute",n.display="none",n.pointerEvents="none",this.\$overlay.classList.add("scan-region-highlight"),!s&&i.highlightScanRegion){this.\$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.\$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(o){}a.insertBefore(this.\$overlay,this.\$video.nextSibling)}i.highlightCodeOutline&&(this.\$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.\$codeOutlineHighlight=this.\$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let e=window.getComputedStyle(t);"none"===e.display&&(t.style.setProperty("display","block","important"),r=!0),"visible"!==e.visibility&&(t.style.setProperty("visibility","visible","important"),r=!0),r&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.\$overlay&&this.\$overlay.parentElement&&this.\$overlay.parentElement.removeChild(this.\$overlay),delete this.\$overlay,delete this.\$codeOutlineHighlight),this.\$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=e.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await e.listCameras(!1)).length}catch(t){return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let i=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),a;try{t&&(await i()).every(e=>!e.label)&&(a=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(s){}try{return(await i()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":\`Camera \${t+1}\`)}))}finally{a&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),e._stopVideoStream(a))}}async hasFlash(){let t;try{if(this.\$video.srcObject){if(!(this.\$video.srcObject instanceof MediaStream))return!1;t=this.\$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch(i){return!1}finally{t&&t!==this.\$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),e._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.\$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.\$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.\$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),e._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden)){if(this._paused=!1,this.\$video.srcObject)await this.\$video.play();else try{let{stream:t,facingMode:i}=await this._getCameraStream();!this._active||this._paused?e._stopVideoStream(t):(this._setVideoMirror(i),this.\$video.srcObject=t,await this.\$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(a){if(!this._paused)throw this._active=!1,a}}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.\$video.pause(),this.\$overlay&&(this.\$overlay.style.display="none");let i=()=>{this.\$video.srcObject instanceof MediaStream&&(e._stopVideoStream(this.\$video.srcObject),this.\$video.srcObject=null)};return t?(i(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(i(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(t,i,a,s,n=!1,r=!1){let o,h=!1;i&&("scanRegion"in i||"qrEngine"in i||"canvas"in i||"disallowCanvasResizing"in i||"alsoTryWithoutScanRegion"in i||"returnDetailedScanResult"in i)?(o=i.scanRegion,a=i.qrEngine,s=i.canvas,n=i.disallowCanvasResizing||!1,r=i.alsoTryWithoutScanRegion||!1,h=!0):i||a||s||n||r?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),i=!!a;try{let d,c;[a,d]=await Promise.all([a||e.createQrEngine(),e._loadImage(t)]),[s,c]=e._drawToCanvas(d,o,s,n);let l;if(a instanceof Worker){let g=a;i||e._postWorkerMessageSync(g,"inversionMode","both"),l=await new Promise((t,i)=>{let a,n,r,h=-1;n=s=>{s.data.id===h&&(g.removeEventListener("message",n),g.removeEventListener("error",r),clearTimeout(a),null!==s.data.data?t({data:s.data.data,cornerPoints:e._convertPoints(s.data.cornerPoints,o)}):i(e.NO_QR_CODE_FOUND))},r=e=>{g.removeEventListener("message",n),g.removeEventListener("error",r),clearTimeout(a),i("Scanner error: "+(e?e.message||e:"Unknown Error"))},g.addEventListener("message",n),g.addEventListener("error",r),a=setTimeout(()=>r("timeout"),1e4);let d=c.getImageData(0,0,s.width,s.height);h=e._postWorkerMessageSync(g,"decode",d,[d.data.buffer])})}else l=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[i]=await a.detect(s);if(!i)throw e.NO_QR_CODE_FOUND;return{data:i.rawValue,cornerPoints:e._convertPoints(i.cornerPoints,o)}}catch(h){if(i=h.message||h,/not implemented|service unavailable/.test(i))return e._disableBarcodeDetector=!0,e.scanImage(t,{scanRegion:o,canvas:s,disallowCanvasResizing:n,alsoTryWithoutScanRegion:r});throw\`Scanner error: \${i}\`}})()]);return h?l:l.data}catch(v){if(!o||!r)throw v;let u=await e.scanImage(t,{qrEngine:a,canvas:s,disallowCanvasResizing:n});return h?u:u.data}finally{i||e._postWorkerMessage(a,"close")}}setGrayscaleWeights(t,i,a,s=!0){e._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:i,blue:a,useIntegerApproximation:s})}setInversionMode(t){e._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>import("./qr-scanner-worker.min.js").then(e=>e.createWorker()),!(!e._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let i=navigator.userAgentData;return i&&i.brands.some(({brand:e})=>/Chromium/i.test(e))&&/mac ?OS/i.test(i.platform)&&await i.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:e,platformVersion:t})=>/arm/i.test(e||"arm")&&13<=parseInt(t||"13")).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.\$video),this._updateOverlay(),this.\$overlay&&(this.\$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.\$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.\$overlay){var e=this.\$video,t=e.videoWidth,i=e.videoHeight,a=e.offsetWidth,s=e.offsetHeight,n=e.offsetLeft,r=e.offsetTop,o=window.getComputedStyle(e),h=o.objectFit,d=t/i,c=a/s;switch(h){case"none":var l=t,g=i;break;case"fill":l=a,g=s;break;default:("cover"===h?d>c:d<c)?l=(g=s)*d:g=(l=a)/d,"scale-down"===h&&(l=Math.min(l,t),g=Math.min(g,i))}var[v,u]=o.objectPosition.split(" ").map((e,t)=>{let i=parseFloat(e);return e.endsWith("%")?(t?s-g:a-l)*i/100:i});o=this._scanRegion.width||t,c=this._scanRegion.height||i,h=this._scanRegion.x||0;var y=this._scanRegion.y||0;(d=this.\$overlay.style).width=\`\${o/t*l}px\`,d.height=\`\${c/i*g}px\`,d.top=\`\${r+u+y/i*g}px\`,i=/scaleX\(-1\)/.test(e.style.transform),d.left=\`\${n+(i?a-v-l:v)+(i?t-h-o:h)/t*l}px\`,d.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,a=t.y||0,s=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;for(let n of(t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1,e))n.x=n.x*s+i,n.y=n.y*t+a;return e}_scanFrame(){!this._active||this.\$video.paused||this.\$video.ended||("requestVideoFrameCallback"in this.\$video?this.\$video.requestVideoFrameCallback.bind(this.\$video):requestAnimationFrame)(async()=>{if(!(1>=this.\$video.readyState)){var t=Date.now()-this._lastScanTimestamp,i=1e3/this._maxScansPerSecond;t<i&&await new Promise(e=>setTimeout(e,i-t)),this._lastScanTimestamp=Date.now();try{var a=await e.scanImage(this.\$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.\$canvas})}catch(s){if(!this._active)return;this._onDecodeError(s)}!e._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=e.createQrEngine()),a?(this._onDecode?this._onDecode(a):this._legacyOnDecode&&this._legacyOnDecode(a.data),this.\$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.\$codeOutlineHighlight.setAttribute("viewBox",\`\${this._scanRegion.x||0} \${this._scanRegion.y||0} \${this._scanRegion.width||this.\$video.videoWidth} \${this._scanRegion.height||this.\$video.videoHeight}\`),this.\$codeOutlineHighlight.firstElementChild.setAttribute("points",a.cornerPoints.map(({x:e,y:t})=>\`\${e},\${t}\`).join(" ")),this.\$codeOutlineHighlight.style.display="")):this.\$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.\$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==e.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)\$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}}));for(let a of[...i,...t])try{let s=await navigator.mediaDevices.getUserMedia({video:a,audio:!1}),n=this._getFacingMode(s)||(a.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:s,facingMode:n}}catch(r){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.\$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,a=!1){i=i||document.createElement("canvas");let s=t&&t.x?t.x:0,n=t&&t.y?t.y:0,r=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return a||(a=t&&t.downScaledWidth?t.downScaledWidth:r,t=t&&t.downScaledHeight?t.downScaledHeight:o,i.width!==a&&(i.width=a),i.height!==t&&(i.height=t)),(t=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,s,n,r,o,0,0,i.width,i.height),[i,t]}static async _loadImage(t){if(t instanceof Image)return await e._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t){let i=new Image;i.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await e._awaitImageLoad(i),i}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(i.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,i)=>{let a=s=>{e.removeEventListener("load",a),e.removeEventListener("error",a),s instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",a),e.addEventListener("error",a)})}static async _postWorkerMessage(t,i,a,s){return e._postWorkerMessageSync(await t,i,a,s)}static _postWorkerMessageSync(t,i,a,s){if(!(t instanceof Worker))return -1;let n=e._workerMessageId++;return t.postMessage({id:n,type:i,data:a},s),n}}return e.DEFAULT_CANVAS_SIZE=400,e.NO_QR_CODE_FOUND="No QR code found",e._disableBarcodeDetector=!1,e._workerMessageId=0,e});`;
  /* global QrScanner */
  document.body.append(QRCodeScript, QrScannerScript);

  const qrColors = ["#000", "#fff"];
  let returnType = "png";

  class SPqrCodes {
    getInfo() {
      return {
        id: "SPqrCodes",
        name: "QR Codes",
        color1: "#2ecc71",
        menuIconURI,
        blockIconURI,
        blocks: [
          { blockType: Scratch.BlockType.LABEL, text: "QR Creation" },
          {
            opcode: "createQR",
            blockType: Scratch.BlockType.REPORTER,
            text: "create QR with data [DATA] scaled to [SIZE] px",
            arguments: {
              DATA: { type: Scratch.ArgumentType.STRING, defaultValue: "test 123" },
              SIZE: { type: Scratch.ArgumentType.NUMBER, defaultValue: 100 }
            }
          },
          {
            opcode: "setColors",
            blockType: Scratch.BlockType.COMMAND,
            text: "set QR [TYPE] to [COLOR]",
            arguments: {
              TYPE: { type: Scratch.ArgumentType.STRING, menu: "COLORS" },
              COLOR: { type: Scratch.ArgumentType.COLOR }
            }
          },
          { blockType: Scratch.BlockType.LABEL, text: "QR Reading" },
          {
            opcode: "readURL",
            blockType: Scratch.BlockType.REPORTER,
            text: "read QR code from URL [URL]",
            arguments: {
              URL: { type: Scratch.ArgumentType.STRING, defaultValue: "https:// or data.uri" }
            }
          },
          {
            opcode: "setExport", blockType: Scratch.BlockType.COMMAND,
            text: "set QR export type to [TYPE]", hideFromPalette: true, // Deprecated
            arguments: { TYPE: { type: Scratch.ArgumentType.STRING, menu: "EXPORTS" } }
          },
          {
            opcode: "returnAs", blockType: Scratch.BlockType.COMMAND,
            text: "return QR code as [TYPE]", hideFromPalette: true, // Deprecated
            arguments: { TYPE: { type: Scratch.ArgumentType.STRING, menu: "EXPORTS2" } }
          }
        ],
        menus: {
          COLORS: ["background", "data"],
          EXPORTS: ["png", "svg"], // Deprecated
          EXPORTS2: ["link", "data.uri"] // Deprecated
        }
      };
    }

    createQR(args) {
      const sz = Math.max(10, Math.min(Scratch.Cast.toNumber(args.SIZE), 1000));
      try {
        const qrcode = new QRCode(document.createElement("img"), {
          text: args.DATA, width: sz, height: sz,
          colorDark: qrColors[0], colorLight: qrColors[1],
          correctLevel: QRCode.CorrectLevel.H,
        });
        return qrcode._oDrawing._oContext.canvas.toDataURL("image/png");
      } catch (e) {
        console.warn(e);
        return "data input is too large for QR"
      }
    }

    setColors(args) { qrColors[args.TYPE === "data" ? 0 : 1] = args.COLOR }

    readURL(args) {
      return QrScanner.scanImage(args.URL, { returnDetailedScanResult: true }).then(result => result.data).catch(error => "")
    }

    // Deprecated
    setExport() { return }
    returnAs() { return }
  }

  function addLinearGradientToBody() {
    var grad1 = document.createElement("div");
    grad1.innerHTML = `<svg><defs>
      <linearGradient x1="240" y1="0" x2="240" y2="100" gradientUnits="userSpaceOnUse" id="SPqrCodes-GRAD1">
      <stop offset="0" stop-color="#2dc4ad"/><stop offset="0.5" stop-color="#2ecc71"/></linearGradient>
      </defs></svg>`;
    var grad2 = document.createElement("div");
    grad2.innerHTML = `<svg><defs>
      <linearGradient x1="240" y1="0" x2="240" y2="100" gradientUnits="userSpaceOnUse" id="SPqrCodes-GRAD2">
      <stop offset="0" stop-color="#2ecc71"/><stop offset="0.5" stop-color="#2dc4ad"/></linearGradient>
      </defs></svg>`;
    document.body.append(grad1, grad2);
  }
  if (Scratch.gui) Scratch.gui.getBlockly().then((ScratchBlocks) => {
    addLinearGradientToBody();
    if (!ScratchBlocks?.SPgradients?.patched) { // Gradient Patch by 0znzw & SharkPool
      ScratchBlocks.SPgradients = {gradientUrls: {}, patched: false};
      const BSP = ScratchBlocks.BlockSvg.prototype, BSPR = BSP.render;
      BSP.render = function(...args) {
        const res = BSPR.apply(this, args);
        let category;
        if (this?.svgPath_ && this?.category_ && (category = this.type.slice(0, this.type.indexOf("_"))) && ScratchBlocks.SPgradients.gradientUrls[category]) {
          const urls = ScratchBlocks.SPgradients.gradientUrls[category];
          if (urls) this.svgPath_.setAttribute("fill", urls[0]);
        }
        return res;
      }
      ScratchBlocks.SPgradients.patched = true;
    }
    ScratchBlocks.SPgradients.gradientUrls["SPqrCodes"] = ["url(#SPqrCodes-GRAD1)", "url(#SPqrCodes-GRAD2)"];
  });

  Scratch.extensions.register(new SPqrCodes);
})(Scratch);
